{% extends 'base.html' %}

{% block title %}Account Details{% endblock %}

{% block content %}
<div class="container mt-5">
  <h1 class="heading text-center">Account Details</h1>
  
  <!-- Account details overview -->
  <div class="card mx-auto" style="width: 400px;">
    <div class="card-body">
      <!-- URL -->
      <div class="mb-3">
        <strong>URL</strong>
        <p>{{ account.url }}</p>
      </div>

      <!-- Username -->
      <div class="mb-3">
        <strong>Username</strong>
        <p>{{ account.username }}</p>
      </div>

      <!-- Password (masked) with toggle button -->
      <div class="mb-3">
        <strong>Password</strong>
        <p>
          <span id="maskedPassword">••••••••</span>
          <img src="{{ url_for('static', filename='images/hide.png') }}" alt="Toggle Password" width="20px" id="togglePasswordView">
        </p>
      </div>

      <!-- Script to toggle password visibility -->
      <script>
        document.getElementById("togglePasswordView").addEventListener("click", function () {
          var passwordText = document.getElementById("maskedPassword");
          var icon = document.getElementById("togglePasswordView");

          if (passwordText.innerText === "••••••••") {
            passwordText.innerText = "{{ decrypted_password|safe }}";  // Unmask the password
            icon.src = "{{ url_for('static', filename='images/show.png') }}";  // Change to show icon
          } else {
            passwordText.innerText = "••••••••";  // Mask the password
            icon.src = "{{ url_for('static', filename='images/hide.png') }}";  // Change to hide icon
          }
        });
      </script>

      <!-- Edit Button (now links to the edit form) -->
      <div class="text-center">
        <a href="{{ url_for('edit_vault', account_id=account.id) }}" class="btn btn-primary">Edit</a>
      </div>
    </div>
  </div>

  <!-- Back to all vaults -->
  <div class="text-center mt-4">
    <a href="{{ url_for('all_vaults') }}" class="btn btn-secondary">Back to All Vaults</a>
  </div>
</div>
{% endblock %}
